

```{r}
# Upload packages
require(rgdal)
require(leaflet)
require(leaflet.extras)
require(dplyr)
require(readxl)
require(stringr)

```

```{r}
# 2018 Philadelphia Marathon Route
# Upload polylines, polypoints, and polygons
# This data was created from http://geojson.io/#map=2/20.0/0.0. 
# Point and line data was traced from the 2018 Philadelphia marathon website, https://philadelphiamarathon.phila.gov/#/
route <- readOGR("marathon.geojson")
plot(route)
markers1 <- readOGR("newmarkers.geojson")
plot(markers1)
hoods <- readOGR("Neighborhoods_Philadelphia.geojson")
plot(hoods)
```

```{r}
# Copy code from Template
leaflet() %>%
  addProviderTiles(providers$OpenMapSurfer.Grayscale, options = providerTileOptions(noWrap = TRUE)) %>%
  # Basemaps
  addTiles(group = "First") %>%
  addProviderTiles("Esri.WorldImagery", group = "Life") %>%
  addProviderTiles("Esri.WorldTopoMap", group = "Topo") %>%
  addProviderTiles("Esri.WorldTerrain", group = "Terrain") %>%
 

   # Layers control
  addLayersControl(
    baseGroups = c("First", "Life", "Topo", "Terrain"),
    options = layersControlOptions(collapsed = FALSE)
  )

```

```{r}
# Plot map 

# Add an if else statement to change colors
getColor <- function(markers1) {
  sapply(markers1$marker.symbol, function(marker.symbol) {
  if(marker.symbol %in% "Start") {
    "green"
  } else if(marker.symbol %in% "Finish") {
    "red"
  } else {
    "blue"
  } })
}

# Add icon
icons <- awesomeIcons(
  icon = 'glyphicon glyphicon-heart',
  markerColor = getColor(markers1)
)

# Create Map
leaflet(data = route) %>%
  addProviderTiles("Stamen.TonerLite") %>%
  addPolylines(data = route) %>%
  addPolygons(data = hoods) %>%
  addTiles() %>%
  addAwesomeMarkers(data = markers1, icon = icons, label = ~as.character(marker.symbol), labelOptions = labelOptions(noHide = T, direction = "left")) %>%
 
  # Add layer controls
  addLayersControl(
  baseGroups = c("First", "Life", "Topo", "Terrain"),
  options = layersControlOptions(collapsed = FALSE)
  )


```

```{r}
markers@data



```

